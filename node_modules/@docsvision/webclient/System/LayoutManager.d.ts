import { $LayoutCardController } from "@docsvision/webclient/Generated/DocsVision.WebClient.Controllers";
import { GenModels } from "@docsvision/webclient/Generated/DocsVision.WebClient.Models";
import { ModalWindow } from "@docsvision/webclient/Legacy/ModalWindow";
import { $ApplicationTimestamp, $Locale, $SiteUrl } from "@docsvision/webclient/StandardServices";
import { Layout } from "@docsvision/webclient/System/Layout";
import { ILayoutContainerMap } from "@docsvision/webclient/System/ILayoutContainerMap";
import { LayoutContainer } from "@docsvision/webclient/System/LayoutContainer";
import { CancelableEvent } from "@docsvision/webclient/System/CancelableEvent";
import { ICancelableEvent } from "@docsvision/webclient/System/ICancelableEvent";
import { IEventArgs } from "@docsvision/webclient/System/IEventArgs";
import { SimpleEvent } from "@docsvision/webclient/System/SimpleEvent";
import { ILayoutManager } from "@docsvision/webclient/System/$LayoutManager";
import { ServiceContainer } from "@docsvision/webclient/System/ServiceContainer";
import { ILayout } from '@docsvision/webclient/System/$Layout';
import { $CardId, $CardTimestamp } from '@docsvision/webclient/System/LayoutServices';
import { FieldSpec } from '@docsvision/webclient/System/GetFieldName';
import { PageLeaveConfirmation } from '@docsvision/webclient/System/PageLeaveConfirmation';
import { ShowLayoutParams } from "@docsvision/webclient/System/ShowLayoutParams";
import { $Router } from '@docsvision/webclient/System/$Router';
/** @internal */
export declare type $MainContentElementId = {
    mainContentElementId: string;
};
export declare const $MainContentElementId: FieldSpec<$MainContentElementId, string>;
export declare type $LayoutManagerServices = $SiteUrl & $ApplicationTimestamp & $LayoutCardController & $Locale & $CardId & $CardTimestamp & $Router;
/** Основной класс для отображения разметок и получения к ним доступа. */
export declare class LayoutManager implements ILayoutManager {
    protected services: $LayoutManagerServices;
    protected layoutContainer?: LayoutContainer<GenModels.LayoutViewModel>;
    protected rootElementId: string;
    /** Note, on view layouts save can be performed multiple times. On edit and create it should be performed once. */
    protected pageLeaveConfirmationDisabled: boolean;
    protected layoutContainers: ILayoutContainerMap;
    protected layoutCardLayoutPosition: string;
    protected layoutUnloading: CancelableEvent<ILayout>;
    protected layoutUnloaded: SimpleEvent<ILayout>;
    protected pageLeaveConfirmation: PageLeaveConfirmation;
    protected prevConfirmationModal: ModalWindow;
    /** @internal */
    constructor(mainContentElementId: string, services?: $LayoutManagerServices);
    /** @deprecated */
    readonly RootHtmlElement: HTMLElement;
    /** @deprecated */
    readonly IsCardSaved: boolean;
    /** Если в данный момент в Web-клиенте открыта карточка, то возвращает ее разметку. */
    readonly cardLayout: Layout | undefined;
    /** Событие, возникающее перед закрытием разметки.  */
    readonly LayoutUnloading: ICancelableEvent<IEventArgs>;
    /** Событие, возникающее после закрытия разметки.  */
    readonly LayoutUnloaded: SimpleEvent<IEventArgs>;
    /** Открывает разметку карточки на месте основного содержимого Web-клиента. */
    showCard(model: GenModels.LayoutCardViewModel, name?: string, owner?: string, services?: ServiceContainer): JQueryDeferred<Layout>;
    showRow(model: GenModels.LayoutRowViewModel, name?: string, owner?: string, services?: ServiceContainer): JQueryDeferred<Layout>;
    /**
     * @deprecated Use showLayout instead
     */
    show(root: HTMLElement | string, name: string, model: GenModels.LayoutViewModel): JQueryDeferred<Layout>;
    /** Открывает разметку. */
    showLayout({ root, name, model, owner, layoutPosition, services }: ShowLayoutParams): JQueryDeferred<Layout>;
    /** Возвращает разметку по имени экземпляра. */
    getLayout(name: string): Layout | undefined;
    /** Возвращает имя разметки, заполняющей место основного содержимого Web-клиента. */
    getCurrentLayoutName(): string | undefined;
    /** Возвращает описание разметки по имени экземпляра. */
    getLayoutModel(name: string): GenModels.LayoutViewModel | GenModels.LayoutCardViewModel | undefined;
    /** Отключает запрос подтверждения при закрытии страницы или переходе на другую страницу. */
    disablePageLeaveConfirmation(): void;
    /** Удаляет карточку. */
    deleteCard(cardId?: string, permanent?: boolean, parentCardId?: string, relatedCreatorCardInfo?: GenModels.RelatedCreatorCardInfo): JQueryDeferred<any>;
    /** Равносильно нажатию кнопки "Назад" в браузере. */
    back(): void;
    /** @internal */
    protected createLayout<T extends GenModels.LayoutViewModel>(options: {
        layoutViewModel: T;
        owner?: string;
        name?: string;
        root?: string | HTMLElement;
        positionName?: string;
        isMainContentLayout?: boolean;
        services?: ServiceContainer;
    }): Promise<{
        layoutContainer: LayoutContainer<T>;
        layout: Layout;
    }>;
    /** @internal */
    protected readonly siteUrl: string;
    /** Временная метка запуска сервера. */
    protected readonly applicationTimestamp: number;
    /** @internal */
    protected unmountCallback(name?: string): void;
    /** @internal */
    protected initialize(model: GenModels.LayoutViewModel): void;
    protected onMainContentChanging(): JQueryDeferred<void>;
    destroyAllUnsaved(showLeaveConfirmationDialog?: boolean): JQueryDeferred<void>;
    deleteAllUnsaved(synchronous?: boolean): JQueryDeferred<any>;
    /** Закрывает разметку с указанным именем экземпляра. */
    destroy(name?: string, showLeaveConfirmationDialog?: boolean): JQueryDeferred<any>;
    private deleteUnsaved;
    getUnsavedLayouts(): Layout[];
    layoutIsUnsaved(layout: Layout): boolean;
    /** Обновляет внешний вид Web-клиента на основе стилей, заданных для указанного типа карточки. */
    protected updateFolderStyle(cardTypeId: string): void;
    /** @internal */
    protected reactJsUnmount(targetElem?: HTMLElement): void;
    /** @internal */
    onWindowUnload(ev: any): void;
}
export declare let layoutManager: LayoutManager | undefined;
export declare function setLayoutManager(manager: LayoutManager): void;
