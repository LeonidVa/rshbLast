import { $LayoutController } from '@docsvision/webclient/Generated/DocsVision.WebClient.Controllers';
import { GenModels } from "@docsvision/webclient/Generated/DocsVision.WebClient.Models";
import { $StandardControllers } from '@docsvision/webclient/Legacy/StandardControllers';
import { Panel, PanelParams } from "@docsvision/webclient/Platform/Panel";
import { $StandardServices } from '@docsvision/webclient/StandardServices';
import { BaseControl, BaseControlParams, BaseControlState, LayoutControl } from "@docsvision/webclient/System/BaseControl";
import { ILayout, SaveCardOptions } from "@docsvision/webclient/System/$Layout";
import { $ParentOwnerLayout } from "@docsvision/webclient/System/$ParentOwnerLayout";
import { ILayoutParams, ILayoutSavedEventArgs } from "@docsvision/webclient/System/ILayoutParams";
import { LayoutImpl, LayoutState } from "@docsvision/webclient/System/LayoutImpl";
import { ControlWrapperMap } from "@docsvision/webclient/System/ControlWrapperMap";
import { IControlStoreManager } from '@docsvision/webclient/System/IControlStoreManager';
import { IEditOperationStore } from "@docsvision/webclient/System/IEditOperationStore";
import { ILayoutContainer } from "@docsvision/webclient/System/ILayoutContainer";
import { FieldSpec } from '@docsvision/webclient/System/GetFieldName';
import { BasicApiEvent, CancelableApiEvent } from "@docsvision/webclient/System/ApiEvent";
import { ICardStateChangingEventArgs } from "@docsvision/webclient/System/ICardStateChangingEventArgs";
import { IEventArgs } from "@docsvision/webclient/System/IEventArgs";
import { Optional, ServiceContainer } from '@docsvision/webclient/System/ServiceContainer';
/**
 * Публичные свойства для контрола {@link Layout}.
 */
export declare class LayoutParams extends PanelParams implements ILayoutParams {
    /** Стандартный CSS класс со стилями элемента управления. */
    standardCssClass?: string;
    /** Название разметки. */
    layoutName: string;
    /** Владелец разметки. */
    owner: Layout;
    /** Дочерние разметки. */
    childLayouts: Layout[];
    /** Событие возникает при открытии карточки. */
    cardOpening?: CancelableApiEvent<IEventArgs>;
    /** Событие возникает после открытия карточки. */
    cardOpened?: BasicApiEvent<IEventArgs>;
    /** Событие возникает при сохранении карточки. */
    cardSaving?: CancelableApiEvent<SaveControlDataModelEventArgs>;
    /** Событие возникает после сохранения карточки. */
    cardSaved?: CancelableApiEvent<ILayoutSavedEventArgs>;
    /** Событие возникает, если при сохранении карточки возникли ошибки. */
    cardSaveFailed?: BasicApiEvent<IEventArgs>;
    /** Событие возникает перед изменением состояния карточки. */
    cardStateChanging?: CancelableApiEvent<ICardStateChangingEventArgs>;
    /** Событие возникает перед изменением разметки карточки. */
    cardLayoutSwitching?: CancelableApiEvent<IEventArgs>;
    /** Событие возникает перед изменением разметки карточки. */
    layoutWillUnmount?: BasicApiEvent<IEventArgs>;
    /** @internal */
    mapLayout?: (layoutResolver: () => Layout) => void;
    /** @internal */
    initializationDeferred: JQueryDeferred<Layout>;
    services?: ServiceContainer & $StandardServices & $StandardControllers & Optional<$ParentOwnerLayout> & Optional<$LayoutController>;
}
export declare type SaveControlDataModelEventArgs = (GenModels.SaveControlDataModel | GenModels.SaveRowControlDataModel) & {
    deferred: JQueryDeferred<any>;
};
/**
 * Класс разметки карточки.
 *
 * Предоставляет доступ к элементам управления, расположенным на разметке, а также методы управления и события карточки.
 */
export declare class Layout extends Panel<LayoutParams, LayoutState> implements ILayout {
    constructor(props: LayoutParams);
    /** @internal */
    protected createParams(): LayoutParams;
    /** @internal */
    componentDidMount(): void;
    /** Возвращает элементы управления разметки. */
    readonly controls: ControlWrapperMap;
    readonly controlStoreManager: IControlStoreManager;
    private cardInfoHandler;
    /** Возвращает модель данных карточки. */
    readonly cardInfo: GenModels.CardInfoModel;
    private rowInfoHandler;
    /** Возвращает модель данных строки. */
    readonly rowInfo: GenModels.RowInfoModel;
    private layoutInfoHandler;
    /** Возвращает модель данных разметки. */
    readonly layoutInfo: GenModels.LayoutInfoModel;
    private layoutContainerHandler;
    /** Возвращает контейнер разметки. */
    readonly layoutContainer: ILayoutContainer<any>;
    private editOperationsHandler;
    /** Предоставляет доступ к хранилищу операций редактирования. */
    readonly editOperations: IEditOperationStore;
    /** Возвращает текущую разметку. */
    readonly layout: Layout;
    getService<T>(name?: FieldSpec<any, T>): T;
    /** Возвращает отображаемое название типа карточки. */
    readonly cardTypeName: string;
    readonly isCardLayout: boolean;
    readonly isRowLayout: boolean;
    /** @internal */
    protected readonly control: LayoutImpl;
    /** @deprecated Используйте сервис $ControlStoreManager */
    protected registerControl(control: BaseControl<BaseControlParams, BaseControlState>): void;
    /** @deprecated Используйте сервис $ControlStoreManager */
    protected unregisterControl(control: BaseControl<BaseControlParams, BaseControlState>): void;
    /**
     * Сохраняет изменения всей разметки (карточки) или конкретного элемента управления.
     * @param control Элемент управления который требуется сохранить. Если не указан, будет сохранена вся разметка.
     * @param doNotMarkAsSaved Флаг, указывающий, что карточка должна сохранить признак "не сохранена": true - карточка остается с признаком "не сохранена",
     * false - карточка сохраняется в обычном режиме.
     */
    saveCard(control?: BaseControl<BaseControlParams, BaseControlState>, doNotMarkAsSaved?: boolean): JQueryDeferred<any>;
    /**
     * Сохраняет изменения всей разметки (карточки) или конкретного элемента управления.
     * @param control Элемент управления который требуется сохранить. Если не указан, будет сохранена вся разметка.
     * @param options Параметры сохранения.
     */
    saveCardEx(control?: LayoutControl, options?: SaveCardOptions): JQueryDeferred<any>;
    /**
     * Изменяет состояние карточки, по полученной операции редактирования и перезагружает разметку.
     * @param operationId Идентификатор операции редактирования.
     */
    changeState(operationId: string): JQueryDeferred<any>;
    /**
     * Изменяет состояние карточки, по полученной операции редактирования, не перезагружая разметку.
     * @param operationId Идентификатор операции редактирования.
     */
    changeStateEx(operationId: string): JQueryDeferred<any>;
    reloadFromServer(): JQueryDeferred<void>;
    /**
     * Проверяет, что карточка не заблокирована и не была изменена в другой сессии.
     * @return fail срабатывает, когда карточка заблокирована и есть изменения; иначе - срабатывает done.l.
     */
    checkLockAndModified(): JQueryDeferred<void>;
    /** @internal */
    protected handleCardOpening(): void;
    /** @internal */
    protected handleCardOpened(): void;
    /** @internal */
    protected handleCardSaving(saveControlData: SaveControlDataModelEventArgs): JQueryDeferred<any>;
    /** @internal */
    protected handleCardSaved(callback: () => void, args?: ILayoutSavedEventArgs): void;
    /** @internal */
    protected handleCardSaveFailed(): void;
    /** @internal */
    protected handleCardStateChanging(operationId: string, acceptedCallback?: (data?: ICardStateChangingEventArgs) => void, cancelledCallback?: (data?: ICardStateChangingEventArgs) => void): void;
    /** @internal */
    protected handleCardLayoutSwitching(callback: () => void, rejectCallback: () => void): void;
    /**
     * Возвращает флаг, указывающий, что карточка была сохранена после загрузки разметки: true - была сохранена, false - не была сохранена.
     */
    readonly saved: boolean;
    /** @internal */
    componentWillMount(): void;
    /** @internal */
    componentWillUnmount(): void;
    /** @internal */
    deinit(): void;
    /** @internal Освобождает дерево компонентов. */
    destroy(): JQueryDeferred<any>;
    /** @internal */
    protected createImpl(): LayoutImpl;
}
